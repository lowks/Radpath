box: elixir:latest
build:
  steps:

      # Installing OS dependencies
      - script:
          name: Installing Ubuntu zip
          code: |
            sudo apt-get update
            sudo apt-get install -y zip
            
      # Setting Environmental variables\
      - script:
          name: set env variable
          code: |
            export MIX_ENV=test
      
      # Check elixir version      
      - script:
          name: check elixir version
          code: |
            iex --version

      # Get dependencies.
      - script:
          name: Get Depedencies
          code: |
            cd $WERCKER_SOURCE_DIR
            yes | mix deps.get
            yes | mix deps.compile --all
            
      # Run the test
      - script:
            name: mix test
            code: |
              mix test
